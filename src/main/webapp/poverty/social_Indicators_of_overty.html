<!DOCTYPE html>
<html lang="en">
<head>
    <!--
      @author DoubleH
      @email 1120023921@qq.com
      @Description: 贫困人口社会指标
    -->
    <meta charset="UTF-8">
    <title>贫困人口社会指标</title>
    <!-- 引入Jquery -->
    <script type="text/javascript" src="../zdo_static/js/jquery-3.2.1.min.js"></script>

    <!-- 引入Bootstrap -->
    <link rel="stylesheet" href="../zdo_static/css/bootstrap-3.3.7/css/bootstrap.min.css">
    <script src="../zdo_static/js/bootstrap.min.js"></script>

    <!-- 引入BootStrap-table -->
    <link rel="stylesheet" href="../zdo_static/js/libs/bootstrap-table-master/dist/bootstrap-table.min.css">
    <script src="../zdo_static/js/libs/bootstrap-table-master/dist/bootstrap-table.min.js"></script>

    <!-- 引入Bootstrap-paginator -->
    <script src="../zdo_static/js/libs/bootstrap-paginator-master/build/bootstrap-paginator.min.js"></script>

    <!-- 引入Echarts -->
    <script type="text/javascript" src="../zdo_static/js/echarts.js"></script>
</head>
<body>
    <div class="container">
        <div>
            <ul class="nav nav-tabs">
                <li role="presentation" id="tableTag"><a href="javascript:;" onclick="showTable()">&nbsp;<span class="glyphicon glyphicon-th-large"></span>&nbsp;</a></li>
                <li role="presentation" id="imageTag"><a href="javascript:;" onclick="showImage()">&nbsp;<span class="glyphicon glyphicon-tasks"></span>&nbsp;</a></li>
            </ul>
        </div>

        <div id="tableView">
            <div class="page-header" style="text-align: center;">
                <h3>贫困人口社会指标</h3>
                <br>
                <h4 style="margin-top: -20px;">Social Indicators of Poverty</h4>
            </div>
            <!-- <div style="text-align: right;">单位:&nbsp;%</div> -->
            <table id="tableData" class="table table-hover table-striped">
                <tr>
                    <td style="text-align: center;">国家</td>
                    <td>5岁以内儿童死亡率（‰）</td>
                    <td>12-23个月儿童麻疹疫苗免疫接种率（%）</td>

                </tr>
            </table>
        </div>

        <div id="imageView">
            <div class="page-header" style="text-align: center;">
                <h3>贫困人口社会指标</h3>
                <br>
                <h4 style="margin-top: -20px;">Social Indicators of Poverty</h4>
            </div>

            <div class="panel" style="margin-top: 1.5em;">
                <div id="main" style="width: 100%;height:400px;"></div>
            </div>
        </div>

          <div style="color: #959595; margin-top: 1.5em;">*此数据仅展现最近五年，若需全部数据请点击&nbsp;<a href="#" class="btn btn-info btn-xs">
            <span class="glyphicon glyphicon-save"></span> 下载
        </a></div>

        <!-- <div style="text-align: right;"><div id="page"></div></div> -->
    </div>
    <script>
        $(function() {
            $('#all').hide()
            $('#imageView').hide();
            $('#imageView2').hide();
            $('#tableTag').attr('class', 'active');
        })

        function showTable() {
            $('#all').hide()
            $('#tableView').show();
            $('#tableView2').show();
            $('#imageView').hide();
            $('#imageView2').hide()
            $('#tableTag').attr('class', 'active');
            $('#imageTag').removeClass('active');
            $('#first').show()
            $('#second').show()
        }

        function showImage() {
            $('#all').show()
            $('#imageView').show();
            $('#tableView').hide();
            $('#tableView2').hide();
            $('#imageView2').show();
            $('#imageTag').attr('class', 'active');
            $('#tableTag').removeClass('active');
            $('#first').hide()
            $('#second').hide()
        }


        var data=getRemoteData('/poverty/json.do?info=SocialIndicatorsOfPoverty');

        //初始化图
        function initPic(data) {
            var option = {
                //timeline基本配置都写在baseoption 中
                baseOption: {
                    timeline: {
                        loop: true,
                        axisType: 'category',
                        show: true,
                        autoPlay: true,
                        playInterval: 1000,
                        data: setYears(data)
                    },
                    legend: {
                        data: setLegend(data)
                    },
                    tooltip: {
                        trigger: 'axis'
                    },
                    title:{
                        subtext:'数据来源'
                    },
                    calculable: true,
                    grid: {
                        y: 100,
                        y2: 100
                    },
                    xAxis: [{
                        type: 'category',
                        data: setCountries(data)
                    }],
                    yAxis: [{
                        type: 'value',
                        name: '‰'
                    },{
                        type: 'value',
                        name: '%',
                        axisLine: {
                            lineStyle: {
                                color: '#d14a61'
                            }
                        },
                    }],
                    series: setSeriesTitle(data)
                },
                options:setOptions(data)
            };
            var myChart = echarts.init(document.getElementById('main'));
            myChart.setOption(option);
        }

        initPic(data)
        setTableData(data,$('#tableData'));
    </script>
</body>
</html>
